<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
 "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Script-Type" content="text/javascript">
<meta http-equiv="Content-type" content="text/html; charset=UTF-8">
<title>ajax()メソッドによるXMLの読み込み</title> 
<script type="text/javascript" src="http://code.jquery.com/jquery-1.6.4.min.js"></script>

<style type="text/css">
<!--
tr {
	background: #0FF;
}

th {
	background: #333;
	color: #DDD;
}							
th, td{
		padding: 5px;
}
-->		
</style>

<script type="text/javascript">
<!--
$(function(){
	$("#loadAll").click(function(){	
		$.ajax({
			url: "members.xml",
			dataType: "xml",
			success: function(xml){
				parseXml(xml);
			}
		});
	});	
});

function parseXml(xml) {
	// tableがあれば削除する
	$("#disp table").remove();
	 
	var table = $("<table>");
	$(table).append("<tr><th>ID</th><th>名前</th><th>ユーザ名</th></tr>");
	
	$("person", xml).each(function(){
		$(table).append("<tr><td>" + $("id", this).text() + "</td>"
			+ "<td>" + $("realname", this).text() + "</td>"
			+ "<td>" + $("username", this).text() + "</td></tr>");		
	});
	
	$(table).appendTo("#disp");
}
// -->
</script>
	
</head> 

<body> 
<form name="form1"><p>
<input type="button" id="loadAll" value="XMLの読み込み">
</p></form>
<div id="disp"></div>
</body>
</html>
